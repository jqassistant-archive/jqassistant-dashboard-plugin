(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{188:function(e,t,a){"use strict";a.d(t,"d",function(){return m}),a.d(t,"b",function(){return f}),a.d(t,"a",function(){return g});var n=a(27),o=a(28),c=a(30),r=a(29),i=a(31),s=a(1),l=a.n(s),u=a(181),d=a(189),p=(localStorage.getItem("connectionString"),localStorage.getItem("username"),localStorage.getItem("password"),null),h=null,m=null,f=!1,E=!0;function g(e,t){this.message=e,this.name=t}var O=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){return this.handleAction=this.handleAction.bind(this),this.setState({dispatcherEventId:d.register(this.handleAction)}),new Promise(t.checkForDatabaseConnection).then(this.testDatabaseCredentials())}},{key:"testDatabaseCredentials",value:function(){var e,t,n;if(e=localStorage.getItem("connectionString"),t=localStorage.getItem("username"),n=localStorage.getItem("password"),f)return this.refreshConnectionSettings(),p="undefined"!==typeof testrun?a(240):a(241),h=p.v1.driver("bolt://"+e,p.v1.auth.basic(t,n)),(m=h.session()).run("match (n) return n limit 1").then(function(){E=!0}).catch(function(e){throw E=!1,"",new g("Invalid database connection data","InvalidDatabaseConnectionException")})}},{key:"componentDidMount",value:function(){}},{key:"refreshConnectionSettings",value:function(){localStorage.getItem("connectionString"),localStorage.getItem("username"),localStorage.getItem("password")}},{key:"componentWillUnmount",value:function(){d.unregister(this.state.dispatcherEventId)}},{key:"handleAction",value:function(e){switch(e.action.actionType){case"SET_STATE":var t=e.action.data;this.setState(t)}}},{key:"render",value:function(){var e=[];if(!f||!E){console.log("No database credentials, redirecting to settings...");var t=window.location.protocol+"//"+window.location.host+"/#";"/settings"!==window.location.href.replace(t,"")&&e.push(l.a.createElement(u.a,{key:"dummy",to:"/settings"}))}return e}}],[{key:"checkForDatabaseConnection",value:function(){var e=localStorage.getItem("connectionString"),t=localStorage.getItem("password"),a=localStorage.getItem("username");if(!(f=null!==e&&""!==e&&null!==t&&""!==t&&null!==a&&""!==a)&&"undefined"!==typeof Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_NEO4J_IP&&"undefined"!==typeof Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_NEO4J_USERNAME&&"undefined"!==typeof Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_NEO4J_PASSWORD){localStorage.setItem("connectionString",Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_NEO4J_IP),localStorage.setItem("username",Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_NEO4J_USERNAME),localStorage.setItem("password",Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_NEO4J_PASSWORD);var n="My project";"undefined"!==typeof Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_PROJECT_NAME&&(n=Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_PROJECT_NAME),localStorage.setItem("projectName",n);var o="70";"undefined"!==typeof Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_LIMIT_COUNTING_HOTSPOTS&&(o=Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_LIMIT_COUNTING_HOTSPOTS),localStorage.setItem("limitCountingHotspots",o),f=!0}}}]),t}(s.Component);t.c=O},189:function(e,t,a){var n=new(0,a(239).Dispatcher);n.handleAction=function(e){this.dispatch({source:"VIEW_ACTION",action:e})},e.exports=n},876:function(e,t,a){"use strict";a.r(t);var n=a(27),o=a(28),c=a(30),r=a(29),i=a(198),s=a(31),l=a(68),u=a(1),d=a.n(u),p=a(188),h=a(257),m=a(865),f=a(866),E=a(867),g=a(861),O=a(862),y=a(863),b=a(864),_=a(868),v=a(869),I=a(605),S=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(r.a)(t).call(this,e))).state={popoverOpen:!1,popovers:[{placement:"bottom",text:"Bottom"}]},a.state={readData:[{aplaceholder:'Please type a query and click "Send"'}],headerData:[{Header:"Result",accessor:"aplaceholder"}],query:"MATCH (a:Author)-[:COMMITTED]->(c:Commit) RETURN a.name, c.message ORDER BY c.date desc LIMIT 20"},a.toggleInfo=a.toggleInfo.bind(Object(l.a)(Object(l.a)(a))),a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){Object(i.a)(Object(r.a)(t.prototype),"componentWillMount",this).call(this)}},{key:"componentDidMount",value:function(){Object(i.a)(Object(r.a)(t.prototype),"componentDidMount",this).call(this)}},{key:"componentWillUnmount",value:function(){Object(i.a)(Object(r.a)(t.prototype),"componentWillUnmount",this).call(this)}},{key:"clear",value:function(e){this.setState({query:"",readData:[{aplaceholder:'Please type a query and click "Send"'}],headerData:[{Header:"Result",accessor:"aplaceholder"}]})}},{key:"sendQuery",value:function(e){var t=[],a=this,n=!0;p.d.run(a.state.query).then(function(e){e.records.forEach(function(e){var o=[],c={};e.keys.forEach(function(t){var a=e._fieldLookup[t],r=e.get(a),i=!1;if("object"===typeof r?(r=JSON.stringify(r,null,2),i=!0):r.low&&(r=r.low),n&&"undefined"!==typeof t&&"object"!==typeof t){var s={Header:t,accessor:t.replace(".","")};i&&(s.style={whiteSpace:"pre"}),o.push(s)}c[t.replace(".","")]=r}),n&&(a.state.headerData=o),n=!1,t.push(c)})}).then(function(e){a.setState({readData:t})}).catch(function(e){console.log(e)})}},{key:"updateStateQuery",value:function(e){this.state.query=e}},{key:"toggleInfo",value:function(){this.setState({popoverOpen:!this.state.popoverOpen})}},{key:"render",value:function(){var e=Object(i.a)(Object(r.a)(t.prototype),"render",this).call(this);return e.length>0?e:d.a.createElement("div",{className:"animated fadeIn"},d.a.createElement(m.a,null,d.a.createElement(f.a,{xs:"12",md:"12"},d.a.createElement(E.a,null,d.a.createElement(g.a,null,"Custom Cypher query",d.a.createElement("div",{className:"card-actions"},d.a.createElement("button",{onClick:this.toggleInfo,id:"Popover"},d.a.createElement("i",{className:"text-muted fa fa-question-circle"})),d.a.createElement(O.a,{placement:"bottom",isOpen:this.state.popoverOpen,target:"Popover",toggle:this.toggleInfo},d.a.createElement(y.a,null,"Custom Cypher query"),d.a.createElement(b.a,null,"The Cypher editor allows custom queries to the Neo4j database and returns tabular results.")))),d.a.createElement(_.a,null,d.a.createElement(h.CypherEditor,{className:"cypheredit",value:this.state.query,options:{mode:"cypher",theme:"cypher"},onValueChange:this.updateStateQuery.bind(this)}),d.a.createElement(v.a,{onClick:this.sendQuery.bind(this),className:"btn btn-success send-query float-right",color:"success",id:"send"},"Send"),d.a.createElement(v.a,{onClick:this.clear.bind(this),className:"btn btn-success send-query float-right margin-right",color:"danger",id:"reset"},"Reset"),d.a.createElement(I.a,{data:this.state.readData,columns:this.state.headerData,defaultPageSize:20,className:"-striped -highlight clear",minRows:1}))))))}}]),t}(p.c);t.default=S}}]);
//# sourceMappingURL=17.784641f7.chunk.js.map