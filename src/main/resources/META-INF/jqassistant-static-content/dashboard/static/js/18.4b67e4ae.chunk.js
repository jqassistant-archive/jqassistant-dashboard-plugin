(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{188:function(e,t,a){"use strict";a.d(t,"d",function(){return p}),a.d(t,"b",function(){return g}),a.d(t,"a",function(){return h});var n=a(27),o=a(28),c=a(30),r=a(29),l=a(31),i=a(1),s=a.n(i),u=a(181),m=a(189),d=(localStorage.getItem("connectionString"),localStorage.getItem("username"),localStorage.getItem("password"),null),E=null,p=null,g=!1,_=!0;function h(e,t){this.message=e,this.name=t}var N=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){return this.handleAction=this.handleAction.bind(this),this.setState({dispatcherEventId:m.register(this.handleAction)}),new Promise(t.checkForDatabaseConnection).then(this.testDatabaseCredentials())}},{key:"testDatabaseCredentials",value:function(){var e,t,n;if(e=localStorage.getItem("connectionString"),t=localStorage.getItem("username"),n=localStorage.getItem("password"),g)return this.refreshConnectionSettings(),d="undefined"!==typeof testrun?a(240):a(241),E=d.v1.driver("bolt://"+e,d.v1.auth.basic(t,n)),(p=E.session()).run("match (n) return n limit 1").then(function(){_=!0}).catch(function(e){throw _=!1,"",new h("Invalid database connection data","InvalidDatabaseConnectionException")})}},{key:"componentDidMount",value:function(){}},{key:"refreshConnectionSettings",value:function(){localStorage.getItem("connectionString"),localStorage.getItem("username"),localStorage.getItem("password")}},{key:"componentWillUnmount",value:function(){m.unregister(this.state.dispatcherEventId)}},{key:"handleAction",value:function(e){switch(e.action.actionType){case"SET_STATE":var t=e.action.data;this.setState(t)}}},{key:"render",value:function(){var e=[];if(!g||!_){console.log("No database credentials, redirecting to settings...");var t=window.location.protocol+"//"+window.location.host+"/#";"/settings"!==window.location.href.replace(t,"")&&e.push(s.a.createElement(u.a,{key:"dummy",to:"/settings"}))}return e}}],[{key:"checkForDatabaseConnection",value:function(){var e=localStorage.getItem("connectionString"),t=localStorage.getItem("password"),a=localStorage.getItem("username");if(!(g=null!==e&&""!==e&&null!==t&&""!==t&&null!==a&&""!==a)&&"undefined"!==typeof Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_NEO4J_IP&&"undefined"!==typeof Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_NEO4J_USERNAME&&"undefined"!==typeof Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_NEO4J_PASSWORD){localStorage.setItem("connectionString",Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_NEO4J_IP),localStorage.setItem("username",Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_NEO4J_USERNAME),localStorage.setItem("password",Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_NEO4J_PASSWORD);var n="My project";"undefined"!==typeof Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_PROJECT_NAME&&(n=Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_PROJECT_NAME),localStorage.setItem("projectName",n);var o="70";"undefined"!==typeof Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_LIMIT_COUNTING_HOTSPOTS&&(o=Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_LIMIT_COUNTING_HOTSPOTS),localStorage.setItem("limitCountingHotspots",o),g=!0}}}]),t}(i.Component);t.c=N},189:function(e,t,a){var n=new(0,a(239).Dispatcher);n.handleAction=function(e){this.dispatch({source:"VIEW_ACTION",action:e})},e.exports=n},873:function(e,t,a){"use strict";a.r(t);var n=a(27),o=a(28),c=a(30),r=a(29),l=a(198),i=a(31),s=a(68),u=a(1),m=a.n(u),d=a(188),E=a(868),p=a(869),g=a(870),_=a(864),h=a(865),N=a(866),O=a(867),f=a(871),P=a(874),I=a(875),S=a(876),b=a(877),C=a(878),A=a(872),j=a(862),v=a(189),R=localStorage.getItem("connectionString"),U=localStorage.getItem("username"),y=localStorage.getItem("password"),T=localStorage.getItem("projectName"),L=localStorage.getItem("limitCountingHotspots");function w(e){console.log(e),localStorage.setItem("connectionString",""),document.getElementById("database-settings-alert").innerHTML="Connection failure: please check the provided data and if the server is running.",document.getElementById("database-settings-alert").className="float-right settings-alert alert alert-danger fade show",document.getElementById("database-settings-alert").style.display="block"}var D=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(r.a)(t).call(this,e))).state={popoverOpen:!1,popovers:[{placement:"bottom",text:"Bottom"}]},a.updateSettings=a.updateSettings.bind(Object(s.a)(Object(s.a)(a))),a.resetSettings=a.resetSettings.bind(Object(s.a)(Object(s.a)(a))),a.toggleInfo=a.toggleInfo.bind(Object(s.a)(Object(s.a)(a))),a}return Object(i.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.handleAction=this.handleAction.bind(this),this.setState({dispatcherEventId:v.register(this.handleAction)})}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){v.unregister(this.state.dispatcherEventId)}},{key:"refreshConnectionSettingsWrapper",value:function(){Object(l.a)(Object(r.a)(t.prototype),"refreshConnectionSettings",this).call(this)}},{key:"updateSettings",value:function(e){var a=document.querySelectorAll(".setting");[].forEach.call(a,function(e){var t=e.id.replace("-input","");localStorage.setItem(t,e.value)});try{if(d.c.checkForDatabaseConnection(),!d.b)throw new d.a("Database connection parameter missing.","DatabaseConncetionException");Object(l.a)(Object(r.a)(t.prototype),"testDatabaseCredentials",this).call(this).then(function(){document.getElementById("database-settings-alert").innerHTML="Successfully saved settings.",document.getElementById("database-settings-alert").className="float-right settings-alert alert alert-success fade show",document.getElementById("database-settings-alert").style.display="block"}).catch(w)}catch(n){w(n)}}},{key:"resetSettings",value:function(e){var t=document.querySelectorAll(".setting");if([].forEach.call(t,function(e){var t=e.id.replace("-input","");switch(t){case"connectionString":e.value=Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_NEO4J_IP||"localhost";break;case"username":e.value=Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_NEO4J_USERNAME||"neo4j";break;case"password":e.value=Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_NEO4J_PASSWORD||"neo4j";break;case"projectName":e.value=Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_PROJECT_NAME||"My project";break;case"limitCountingHotspots":e.value=Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_LIMIT_COUNTING_HOTSPOTS||70}localStorage.removeItem(t)}),"undefined"!==typeof Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_NEO4J_IP&&"undefined"!==typeof Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_NEO4J_USERNAME&&"undefined"!==typeof Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_NEO4J_PASSWORD){localStorage.setItem("connectionString",Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_NEO4J_IP),localStorage.setItem("username",Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_NEO4J_USERNAME),localStorage.setItem("password",Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_NEO4J_PASSWORD);var a="My project";"undefined"!==typeof Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_PROJECT_NAME&&(a=Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_PROJECT_NAME),localStorage.setItem("projectName",a);var n="70";"undefined"!==typeof Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_LIMIT_COUNTING_HOTSPOTS&&(n=Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_LIMIT_COUNTING_HOTSPOTS),localStorage.setItem("limitCountingHotspots",n)}}},{key:"toggleInfo",value:function(){this.setState({popoverOpen:!this.state.popoverOpen})}},{key:"render",value:function(){return R=localStorage.getItem("connectionString"),U=localStorage.getItem("username"),y=localStorage.getItem("password"),T=localStorage.getItem("projectName"),L=localStorage.getItem("limitCountingHotspots"),m.a.createElement("div",{className:"animated fadeIn"},m.a.createElement(E.a,null,m.a.createElement(p.a,{xs:"12",md:"6"},m.a.createElement(g.a,null,m.a.createElement(_.a,null,"Settings",m.a.createElement("div",{className:"card-actions"},m.a.createElement("button",{onClick:this.toggleInfo,id:"Popover2"},m.a.createElement("i",{className:"text-muted fa fa-question-circle"})),m.a.createElement(h.a,{placement:"bottom",isOpen:this.state.popoverOpen,target:"Popover2",toggle:this.toggleInfo},m.a.createElement(N.a,null,"Settings"),m.a.createElement(O.a,null,'Please enter the required connection details of the Neo4j database and the name of your project. Confirm your entries by clicking on "Save".')))),m.a.createElement(f.a,{className:"settings"},m.a.createElement(P.a,{action:"",method:"post",encType:"multipart/form-data",className:"form-horizontal"},m.a.createElement(I.a,{row:!0},m.a.createElement(p.a,{md:"12"},m.a.createElement("strong",null,"Database"))),m.a.createElement(I.a,{row:!0},m.a.createElement(p.a,{md:"3"},m.a.createElement(S.a,{htmlFor:"connectionString-input"},"IP")),m.a.createElement(p.a,{xs:"12",md:"9"},m.a.createElement(b.a,{type:"text",id:"connectionString-input",name:"connectionString-input",className:"setting",placeholder:"Please provide Neo4j connection string...",defaultValue:null!==R&&""!==R?R:"localhost",required:!0}),m.a.createElement(C.a,{color:"muted"},'The dashboard uses the bolt protocol to connect to the database. Please ensure that the Neo4j bolt connector is enabled. Default: "localhost"'))),m.a.createElement(I.a,{row:!0},m.a.createElement(p.a,{md:"3"},m.a.createElement(S.a,{htmlFor:"username-input"},"Username")),m.a.createElement(p.a,{xs:"12",md:"9"},m.a.createElement(b.a,{type:"text",id:"username-input",name:"username-input",className:"setting",placeholder:"Please provide Neo4j username...",defaultValue:null!==U&&""!==U?U:"neo4j",required:!0}),m.a.createElement(C.a,{className:"help-block"},'Default: "neo4j"'))),m.a.createElement(I.a,{row:!0},m.a.createElement(p.a,{md:"3"},m.a.createElement(S.a,{htmlFor:"password-input"},"Password")),m.a.createElement(p.a,{xs:"12",md:"9"},m.a.createElement(b.a,{type:"password",id:"password-input",name:"password-input",className:"setting",placeholder:"Please provide Neo4j password...",defaultValue:null!==y&&""!==y?y:"neo4j",required:!0}),m.a.createElement(C.a,{className:"help-block"},'Default: "neo4j"'))),m.a.createElement("hr",null),m.a.createElement(I.a,{row:!0},m.a.createElement(p.a,{md:"12"},m.a.createElement("strong",null,"Project"))),m.a.createElement(I.a,{row:!0},m.a.createElement(p.a,{md:"3"},m.a.createElement(S.a,{htmlFor:"projectName-input"},"Name")),m.a.createElement(p.a,{xs:"12",md:"9"},m.a.createElement(b.a,{type:"text",id:"projectName-input",name:"projectName-input",className:"setting",placeholder:"Please provide project name...",defaultValue:null!==T&&""!==T?T:"My project",required:!0}),m.a.createElement(C.a,{color:"muted"},'Example: "jUnit"'))),m.a.createElement(I.a,{row:!0},m.a.createElement(p.a,{md:"3"},m.a.createElement(S.a,{htmlFor:"limitCountingHotspots-input"},"Commit hotspot threshold [%]")),m.a.createElement(p.a,{xs:"12",md:"9"},m.a.createElement(b.a,{type:"text",id:"limitCountingHotspots-input",name:"limitCountingHotspots-input",className:"setting",placeholder:"Please provide percentage limit for counting hotspots...",defaultValue:null!==L&&""!==L?L:"70",required:!0}),m.a.createElement(C.a,{color:"muted"},'Lower limit of the percentage commit count of a resource from the maximum commit count to identify a resource as a hotspot. Default: "70"'))),m.a.createElement(I.a,{row:!0,className:"button-row"},m.a.createElement(p.a,{xs:"12",md:"12"},m.a.createElement(A.a,{className:"float-right",color:"success",onClick:this.updateSettings,id:"save"},"Save"),m.a.createElement(A.a,{className:"float-right margin-right",color:"danger",onClick:this.resetSettings,id:"reset"},"Set to default"),m.a.createElement(j.a,{id:"database-settings-alert",className:"float-right settings-alert",color:"success"},"Successfully saved settings.")))))))))}}]),t}(d.c);t.default=D}}]);
//# sourceMappingURL=18.4b67e4ae.chunk.js.map